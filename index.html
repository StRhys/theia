<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Viewer</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>
    <script type="text/javascript">
        var tabledata;

        window.addEventListener('load', async function () {
            // Fetch the CSV file
            try {
                const response = await fetch("https://raw.githubusercontent.com/GSS-Cogs/family-ess/main/aged-19-years-and-over-further-education-and-skills-participation/aged-19-years-and-over-further-education-and-skills-participation.csv");
                tabledata = await response.text();
                console.log(tabledata);
            } catch (error) {
                console.error('Error:', error);
            }
            // Create Tabulator
            var table = new Tabulator("#example-table", {
                height: 500, // set height of table (optional)
                data: tabledata, // assign data to table
                importFormat: "csv", // import data as csv (required)
                layoutColumnsOnNewData: true, // fit columns to width of table (optional)
                autoColumns: true, // create columns from data field names
            });
        });
    </script>
    <script type="text/javascript">
        window.addEventListener('load', async function () {
            try {
                const response = await fetch("https://raw.githubusercontent.com/GSS-Cogs/family-ess/main/out/persistent-absences-for-pupils-eligible-for-free-school-meals/persistent-absences-for-pupils-eligible-for-free-school-meals.csv-metadata.json");
                const data = await response.json();
                console.log(data);

                // Extract the DCAT metadata
                const seeAlso = data['rdfs:seeAlso'];
                const metadata = seeAlso.find(item => item['@type'].includes('http://www.w3.org/ns/dcat#Dataset'));

                // Create a new 'pre' element
                var pre = document.createElement('pre');

                // Set the text content of the 'pre' element
                pre.textContent = JSON.stringify(metadata, null, 2);

                // Append the 'pre' element to the body of the document
                document.body.appendChild(pre);
            } catch (error) {
                console.error('Error:', error);
            }
        });
    </script>
</head>

<body>
    <h1>CSV-W Viewer</h1>
    <h2>Table</h2>
    <div id="example-table"></div>
    <h2>Metadata</h2>


</body>

</html>